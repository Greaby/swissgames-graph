!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,o){},function(t,o,r){"use strict";r.r(o);r(0);var n,i,s,d,l={imageAttribute:"profileimageurl"},u={drawingProperties:{defaultEdgeType:"curve",defaultHoverLabelBGColor:"#002147",defaultLabelBGColor:"#ddd",activeFontStyle:"bold",defaultLabelColor:"#000",labelThreshold:10,defaultLabelHoverColor:"#fff",fontStyle:"bold",hoverFontStyle:"bold",defaultLabelSize:12},graphProperties:{maxEdgeSize:.2,minEdgeSize:.1,minNodeSize:2,maxNodeSize:40},mouseProperties:{maxRatio:20,minRatio:.75}},c={tools:{},classes:{},instances:{}};Array.prototype.some||(Array.prototype.some=function(e,t){var o=this.length;if("function"!=typeof e)throw new TypeError;for(var r=0;r<o;r++)if(r in this&&e.call(t,this[r],r,this))return!0;return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var o=this.length;if("function"!=typeof e)throw new TypeError;for(var r=0;r<o;r++)r in this&&e.call(t,this[r],r,this)}),Array.prototype.map||(Array.prototype.map=function(e,t){var o=this.length;if("function"!=typeof e)throw new TypeError;for(var r=Array(o),n=0;n<o;n++)n in this&&(r[n]=e.call(t,this[n],n,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var o=this.length;if("function"!=typeof e)throw new TypeError;for(var r=[],n=0;n<o;n++)if(n in this){var a=this[n];e.call(t,a,n,this)&&r.push(a)}return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Object.keys||(Object.keys=(n=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),d=(s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on non-object");var t,o=[];for(t in e)n.call(e,t)&&o.push(t);if(i)for(t=0;t<d;t++)n.call(e,s[t])&&o.push(s[t]);return o})),c.classes.Cascade=function(){this.p={},this.config=function(e,t){if("string"==typeof e&&null==t)return this.p[e];var o="object"==typeof e&&null==t?e:{};for(var r in"string"==typeof e&&(o[e]=t),o)null!=this.p[r]&&(this.p[r]=o[r]);return this}},c.classes.EventDispatcher=function(){var e={},t=this;this.one=function(o,r){return r&&o?(("string"==typeof o?o.split(" "):o).forEach((function(t){e[t]||(e[t]=[]),e[t].push({h:r,one:!0})})),t):t},this.bind=function(o,r){return r&&o?(("string"==typeof o?o.split(" "):o).forEach((function(t){e[t]||(e[t]=[]),e[t].push({h:r,one:!1})})),t):t},this.unbind=function(o,r){o||(e={});var n="string"==typeof o?o.split(" "):o;return r?n.forEach((function(t){e[t]&&(e[t]=e[t].filter((function(e){return e.h!=r}))),e[t]&&0==e[t].length&&delete e[t]})):n.forEach((function(t){delete e[t]})),t},this.dispatch=function(o,r){return c.action=o,e[o]&&(e[o].forEach((function(e){e.h({type:o,content:r,target:t})})),e[o]=e[o].filter((function(e){return!e.one}))),t}},function(){var t;function o(){function e(e){return{x:e.x,y:e.y,size:e.size,degree:e.degree,inDegree:e.inDegree,outDegree:e.outDegree,displayX:e.displayX,displayY:e.displayY,displaySize:e.displaySize,label:e.label,id:e.id,color:e.color,fixed:e.fixed,active:e.active,hidden:e.hidden,attr:e.attr}}function t(e){return{source:e.source.id,target:e.target.id,size:e.size,type:e.type,weight:e.weight,displaySize:e.displaySize,label:e.label,hidden:e.hidden,id:e.id,attr:e.attr,color:e.color}}function o(){return r.nodes=[],r.nodesBG=[],r.nodesIndex={},r.nodesBGIndex={},r.edges=[],r.edgesIndex={},r}c.classes.Cascade.call(this),c.classes.EventDispatcher.call(this);var r=this;this.p={minNodeSize:0,maxNodeSize:0,minEdgeSize:0,maxEdgeSize:0,minBGSize:0,maxBGSize:0,scalingMode:"inside",nodesPowRatio:.5,edgesPowRatio:0},this.borders={},o(),this.addNode=function(e,t){if(r.nodesIndex[e])throw Error('Node "'+e+'" already exists.');t=t||{};var o,n={x:0,y:0,size:1,degree:0,inDegree:0,outDegree:0,fixed:!1,active:!1,hidden:!1,label:e.toString(),id:e.toString(),attr:{}};for(o in t)switch(o){case"id":break;case"x":case"y":case"size":n[o]=+t[o];break;case"fixed":case"active":case"hidden":n[o]=!!t[o];break;case"color":case"label":n[o]=t[o];break;default:n.attr[o]=t[o]}return r.nodes.push(n),r.nodesIndex[e.toString()]=n,r},this.addNodeBG=function(e,t){if(r.nodesBGIndex[e])throw Error('NodeBG "'+e+'" already exists.');t=t||{};var o,n={x:0,y:0,size:1,fixed:!1,active:!1,hidden:!1,label:e.toString(),id:e.toString(),attr:{}};for(o in t)switch(o){case"id":break;case"x":case"y":case"size":n[o]=+t[o];break;case"fixed":case"active":case"hidden":n[o]=!!t[o];break;case"color":case"label":n[o]=t[o];break;default:n.attr[o]=t[o]}return r.nodesBG.push(n),r.nodesBGIndex[e.toString()]=n,r},this.addEdge=function(e,t,o,n){if(r.edgesIndex[e])throw Error('Edge "'+e+'" already exists.');if(!r.nodesIndex[t])throw Error("Edge's source \""+t+'" does not exist yet.');if(!r.nodesIndex[o])throw Error("Edge's target \""+o+'" does not exist yet.');for(var a in n=n||{},(t={source:r.nodesIndex[t],target:r.nodesIndex[o],size:1,weight:1,displaySize:.5,label:e.toString(),id:e.toString(),hidden:!1,attr:{}}).source.degree++,t.source.outDegree++,t.target.degree++,t.target.inDegree++,n)switch(a){case"id":case"source":case"target":break;case"hidden":t[a]=!!n[a];break;case"size":case"weight":t[a]=+n[a];break;case"color":case"type":t[a]=n[a].toString();break;case"label":t[a]=n[a];break;default:t.attr[a]=n[a]}return r.edges.push(t),r.edgesIndex[e.toString()]=t,r},this.dropNode=function(e){return((e instanceof Array?e:[e])||[]).forEach((function(e){if(r.nodesIndex[e]){var t=null;r.nodes.some((function(o,r){return o.id==e&&(t=r,!0)})),null!=t&&r.nodes.splice(t,1),delete r.nodesIndex[e],r.edges=r.edges.filter((function(t){return t.source.id==e?(delete r.edgesIndex[t.id],t.target.degree--,t.target.inDegree--,!1):t.target.id!=e||(delete r.edgesIndex[t.id],t.source.degree--,t.source.outDegree--,!1)}))}else c.log('Node "'+e+'" does not exist.')})),r},this.dropEdge=function(e){return((e instanceof Array?e:[e])||[]).forEach((function(e){if(r.edgesIndex[e]){r.edgesIndex[e].source.degree--,r.edgesIndex[e].source.outDegree--,r.edgesIndex[e].target.degree--,r.edgesIndex[e].target.inDegree--;var t=null;r.edges.some((function(o,r){return o.id==e&&(t=r,!0)})),null!=t&&r.edges.splice(t,1),delete r.edgesIndex[e]}else c.log('Edge "'+e+'" does not exist.')})),r},this.iterEdges=function(e,o){var n=o?o.map((function(e){return r.edgesIndex[e]})):r.edges,a=n.map(t);return a.forEach(e),n.forEach((function(e,t){var o,n=a[t];for(o in n)switch(o){case"id":case"displaySize":break;case"weight":case"size":e[o]=+n[o];break;case"source":case"target":e[o]=r.nodesIndex[o]||e[o];break;case"hidden":e[o]=!!n[o];break;case"color":case"label":case"type":e[o]=(n[o]||"").toString();break;default:e.attr[o]=n[o]}})),r},this.iterNodes=function(t,o){var n=o?o.map((function(e){return r.nodesIndex[e]})):r.nodes,a=n.map(e);return a.forEach(t),n.forEach((function(e,t){var o,r=a[t];for(o in r)switch(o){case"id":case"attr":case"degree":case"inDegree":case"outDegree":case"displayX":case"displayY":case"displaySize":break;case"x":case"y":case"size":e[o]=+r[o];break;case"fixed":case"active":case"hidden":e[o]=!!r[o];break;case"color":case"label":e[o]=r[o].toString();break;default:e.attr[o]=r[o]}})),r},this.getEdges=function(e){var o=((e instanceof Array?e:[e])||[]).map((function(e){return t(r.edgesIndex[e])}));return e instanceof Array?o:o[0]},this.getNodes=function(t){var o=((t instanceof Array?t:[t])||[]).map((function(t){return e(r.nodesIndex[t])}));return t instanceof Array?o:o[0]},this.empty=o,this.rescale=function(e,t,o,n,a){var i=0,s=0,d=0,l=Math;o&&r.nodes.forEach((function(e){s=l.max(e.size,s)})),n&&r.edges.forEach((function(e){i=l.max(e.size,i)})),a&&r.nodesBG.forEach((function(e){d=l.max(e.size,d)}));var u,c,h,p;s=s||1,d=d||1,i=i||1;o&&r.nodes.forEach((function(e){c=l.max(e.x,c||e.x),u=l.min(e.x,u||e.x),p=l.max(e.y,p||e.y),h=l.min(e.y,h||e.y)}));var f,g,m,v,b=(b="outside"==r.p.scalingMode?l.max(e/l.max(c-u,1),t/l.max(p-h,1)):l.min(e/l.max(c-u,1),t/l.max(p-h,1)))-b/20;return r.p.maxNodeSize||r.p.minNodeSize?r.p.maxNodeSize==r.p.minNodeSize?(f=0,g=r.p.maxNodeSize):(f=(r.p.maxNodeSize-r.p.minNodeSize)/s,g=r.p.minNodeSize):(f=1,g=0),r.p.maxEdgeSize||r.p.minEdgeSize?(m=r.p.maxEdgeSize==r.p.minEdgeSize?0:(r.p.maxEdgeSize-r.p.minEdgeSize)/i,v=r.p.minEdgeSize):(m=1,v=0),o&&r.nodes.forEach((function(o){o.displaySize=o.size*f+g,o.fixed||(o.displayX=(o.x-(c+u)/2)*b+e/2,o.displayY=(o.y-(p+h)/2)*b+t/2)})),a&&r.nodesBG.forEach((function(o){o.displaySize=o.size*l.sqrt(sigInst._core.mousecaptor.ratio*b),o.fixed||(o.displayX=(o.x-(c+u)/2)*b+e/2,o.displayY=(o.y-(p+h)/2)*b+t/2)})),n&&r.edges.forEach((function(e){e.displaySize=e.size*m+v})),r},this.translate=function(e,t,o,n,a,i){var s=Math.pow(o,r.p.nodesPowRatio);return n&&r.nodes.forEach((function(r){r.fixed||(r.displayX=r.displayX*o+e,r.displayY=r.displayY*o+t),r.displaySize*=s})),i&&r.nodesBG.forEach((function(r){r.fixed||(r.displayX=r.displayX*o+e,r.displayY=r.displayY*o+t),r.displaySize*=s})),s=Math.pow(o,r.p.edgesPowRatio),a&&r.edges.forEach((function(e){e.displaySize*=s})),r},this.setBorders=function(){r.borders={},r.nodes.forEach((function(e){r.borders.minX=Math.min(null==r.borders.minX?e.displayX-e.displaySize:r.borders.minX,e.displayX-e.displaySize),r.borders.maxX=Math.max(null==r.borders.maxX?e.displayX+e.displaySize:r.borders.maxX,e.displayX+e.displaySize),r.borders.minY=Math.min(null==r.borders.minY?e.displayY-e.displaySize:r.borders.minY,e.displayY-e.displaySize),r.borders.maxY=Math.max(null==r.borders.maxY?e.displayY-e.displaySize:r.borders.maxY,e.displayY-e.displaySize)}))},this.checkHover=function(e,t){var o,n,a,i=[],s=[];return r.nodes.forEach((function(r){if(r.hidden)r.hover=!1;else{o=Math.abs(r.displayX-e),n=Math.abs(r.displayY-t),a=r.displaySize;var d=r.hover,l=o<a&&n<a&&Math.sqrt(o*o+n*n)<a;d&&!l?(r.hover=!1,s.push(r.id)):l&&!d&&(r.hover=!0,i.push(r.id))}})),i.length&&r.dispatch("overnodes",i),s.length&&r.dispatch("outnodes",s),r}}function r(e,t){function o(){var e;for(var t in e="<p>GLOBAL :</p>",r.p.globalProbes)e+="<p>"+t+" : "+r.p.globalProbes[t]()+"</p>";for(t in e+="<br><p>LOCAL :</p>",r.p.localProbes)e+="<p>"+t+" : "+r.p.localProbes[t]()+"</p>";return r.p.dom.innerHTML=e,r}c.classes.Cascade.call(this);var r=this;this.instance=e,this.monitoring=!1,this.p={fps:40,dom:t,globalProbes:{"Time (ms)":c.chronos.getExecutionTime,Queue:c.chronos.getQueuedTasksCount,Tasks:c.chronos.getTasksCount,FPS:c.chronos.getFPS},localProbes:{"Nodes count":function(){return r.instance.graph.nodes.length},"Edges count":function(){return r.instance.graph.edges.length}}},this.activate=function(){return r.monitoring||(r.monitoring=window.setInterval(o,1e3/r.p.fps)),r},this.desactivate=function(){return r.monitoring&&(window.clearInterval(r.monitoring),r.monitoring=null,r.p.dom.innerHTML=""),r}}function n(e){function t(e){if(s.mouseX=null!=e.offsetX&&e.offsetX||null!=e.layerX&&e.layerX||null!=e.clientX&&e.clientX,s.mouseY=null!=e.offsetY&&e.offsetY||null!=e.layerY&&e.layerY||null!=e.clientY&&e.clientY,s.isMouseDown){var t=s.mouseX-d+u,o=s.mouseY-l+h;t==s.stageX&&o==s.stageY||(v=m,y=b,m=t,b=o,s.stageX=t,s.stageY=o,s.dispatch("drag"))}s.dispatch("move"),e.preventDefault?e.preventDefault():e.returnValue=!1}function o(e){s.p.mouseEnabled&&s.isMouseDown&&(s.isMouseDown=!1,s.dispatch("mouseup"),(u!=s.stageX||h!=s.stageY)&&a(s.stageX+s.p.inertia*(s.stageX-v),s.stageY+s.p.inertia*(s.stageY-y)),e.preventDefault?e.preventDefault():e.returnValue=!1)}function r(e){s.p.mouseEnabled&&(s.isMouseDown=!0,s.dispatch("mousedown"),u=s.stageX,h=s.stageY,d=s.mouseX,l=s.mouseY,v=m=s.stageX,y=b=s.stageY,s.dispatch("startdrag"),e.preventDefault?e.preventDefault():e.returnValue=!1)}function n(e){s.p.mouseEnabled&&(a(s.mouseX,s.mouseY,s.ratio*(0<(null!=e.wheelDelta&&e.wheelDelta||null!=e.detail&&-e.detail)?s.p.zoomMultiply:1/s.p.zoomMultiply)),s.p.blockScroll&&(e.preventDefault?e.preventDefault():e.returnValue=!1))}function a(e,t,o){s.isMouseDown||(window.clearInterval(s.interpolationID),x=null!=o,u=s.stageX,f=e,h=s.stageY,g=t,p=o||s.ratio,p=Math.min(Math.max(p,s.p.minRatio),s.p.maxRatio),w=s.p.directZooming?1-(x?s.p.zoomDelta:s.p.dragDelta):0,s.ratio==p&&s.stageX==f&&s.stageY==g)||(i(),s.interpolationID=window.setInterval(i,50),s.dispatch("startinterpolate"))}function i(){w+=x?s.p.zoomDelta:s.p.dragDelta,w=Math.min(w,1);var e=c.easing.quadratic.easeout(w),t=s.ratio;s.ratio=t*(1-e)+p*e,x?(s.stageX=f+(s.stageX-f)*s.ratio/t,s.stageY=g+(s.stageY-g)*s.ratio/t):(s.stageX=u*(1-e)+f*e,s.stageY=h*(1-e)+g*e),s.dispatch("interpolate"),1<=w&&(window.clearInterval(s.interpolationID),e=s.ratio,x?(s.ratio=p,s.stageX=f+(s.stageX-f)*s.ratio/e,s.stageY=g+(s.stageY-g)*s.ratio/e):(s.stageX=f,s.stageY=g),s.dispatch("stopinterpolate"))}c.classes.Cascade.call(this),c.classes.EventDispatcher.call(this);var s=this;this.p={minRatio:1,maxRatio:32,marginRatio:1,zoomDelta:.1,dragDelta:.3,zoomMultiply:2,directZooming:!1,blockScroll:!0,inertia:1.1,mouseEnabled:!0};var d=0,l=0,u=0,h=0,p=1,f=0,g=0,m=0,v=0,b=0,y=0,w=0,x=!1;this.stageY=this.stageX=0,this.ratio=1,this.mouseY=this.mouseX=0,this.isMouseDown=!1,e.addEventListener&&document.addEventListener?(e.addEventListener("DOMMouseScroll",n,!0),e.addEventListener("mousewheel",n,!0),e.addEventListener("mousemove",t,!0),e.addEventListener("mousedown",r,!0),document.addEventListener("mouseup",o,!0)):(e.attachEvent("onDOMMouseScroll",n),e.attachEvent("onmousewheel",n),e.attachEvent("onmousemove",t),e.attachEvent("onmousedown",r),document.attachEvent("onmouseup",o)),this.checkBorders=function(){return s},this.interpolate=a}function a(e,t,o,r,n,a,i,s,d){function l(e){var t=r,o=Math.round,n="fixed"==h.p.labelSize?h.p.defaultLabelSize:h.p.labelSizeRatio*e.displaySize;t.font=(h.p.hoverFontStyle||h.p.fontStyle||"")+" "+n+"px "+(h.p.hoverFont||h.p.font||""),t.fillStyle="node"==h.p.labelHoverBGColor?e.color||h.p.defaultNodeColor:h.p.defaultHoverLabelBGColor,h.p.labelHoverShadow&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=4,t.shadowColor=h.p.labelHoverShadowColor);var a=o(e.displayX+10),i=o(e.displayY-n/2-2),s=o(t.measureText(e.label).width+6),d=o(n+4);return o(n/2+2),t.fillRect(a,i,s,d),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.fillStyle="node"==h.p.labelHoverColor?e.color||h.p.defaultNodeColor:h.p.defaultLabelHoverColor,t.fillText(e.label,a+4,i+d-3),h}function u(e){if(isNaN(e.x)||isNaN(e.y))throw Error("A node's coordinate is not a number (id: "+e.id+")");return!e.hidden&&e.displayX+e.displaySize>-p/3&&e.displayX-e.displaySize<4*p/3&&e.displayY+e.displaySize>-f/3&&e.displayY-e.displaySize<4*f/3}c.classes.Cascade.call(this);var h=this;this.contexts={node:e,edge:t,label:o,hover:r,bg:n,bg2:a},this.p={labelColor:"default",defaultLabelColor:"#fff",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverShadow:!0,labelHoverShadowColor:"#000",labelHoverColor:"default",defaultLabelHoverColor:"#000",labelActiveBGColor:"default",defaultActiveLabelBGColor:"#fff",labelActiveShadow:!0,labelActiveShadowColor:"#000",labelActiveColor:"default",defaultLabelActiveColor:"#000",labelSize:"fixed",defaultLabelSize:12,labelSizeRatio:2,labelThreshold:6,font:"Arial",hoverFont:"",activeFont:"",fontStyle:"",hoverFontStyle:"",activeFontStyle:"",edgeColor:"source",defaultEdgeColor:"#aaa",defaultEdgeType:"line",defaultNodeColor:"#aaa",nodeHoverColor:"node",defaultNodeHoverColor:"#fff",nodeActiveColor:"node",defaultNodeActiveColor:"#fff",borderSize:0,nodeBorderColor:"node",defaultNodeBorderColor:"#fff",edgesSpeed:200,nodesSpeed:200,nodesBGSpeed:200,labelsSpeed:200};var p=s,f=d;this.currentBGIndex=this.currentLabelIndex=this.currentBGIndex=this.currentNodeIndex=this.currentEdgeIndex=0,this.task_drawLabel=function(){for(var e=i.nodes.length,t=0;t++<h.p.labelsSpeed&&h.currentLabelIndex<e;)if(h.isOnScreen(i.nodes[h.currentLabelIndex])){var r=i.nodes[h.currentLabelIndex++],n=o;if(r.displaySize>=h.p.labelThreshold){var a="fixed"==h.p.labelSize?h.p.defaultLabelSize:h.p.labelSizeRatio*r.displaySize;n.font=(h.p.hoverFontStyle||h.p.fontStyle||"")+" "+a+"px "+(h.p.hoverFont||h.p.font||"");var s=Math.round,d=s(r.displayX+10),l=s(r.displayY+a/2-2),u=s(n.measureText(r.label).width+6),c=s(a+4);s(a/2+2),n.font=h.p.fontStyle+a+"px "+h.p.font,n.fillStyle="#258EA4",n.fillRect(d,l-c+3,u,c),n.fillStyle="#fff",n.fillText(r.label,d+4,l)}}else h.currentLabelIndex++;return h.currentLabelIndex<e},this.task_drawEdge=function(){for(var e,o,r,n=i.edges.length,a=0;a++<h.p.edgesSpeed&&h.currentEdgeIndex<n;)if(e=(r=i.edges[h.currentEdgeIndex]).source,o=r.target,r.hidden||e.hidden||o.hidden||!h.isOnScreen(e)&&!h.isOnScreen(o))h.currentEdgeIndex++;else{o=(e=i.edges[h.currentEdgeIndex++]).source.displayX,r=e.source.displayY;var s=e.target.displayX,d=e.target.displayY,l=void 0;if(!l)switch(h.p.edgeColor){case"source":l=e.source.color||h.p.defaultNodeColor;break;case"target":l=e.target.color||h.p.defaultNodeColor;break;default:l=h.p.defaultEdgeColor}var u=t;switch(u.strokeStyle=l,u.lineWidth=e.attr.lineWidth?e.attr.lineWidth:.2,e.type||h.p.defaultEdgeType){case"curve":u.beginPath(),u.moveTo(o,r),u.quadraticCurveTo((o+s)/2+(d-r)/4,(r+d)/2+(o-s)/4,s,d),u.stroke();break;default:u.beginPath(),u.moveTo(o,r),u.lineTo(s,d),u.stroke()}}return h.currentEdgeIndex<n},this.task_drawNode=function(){for(var e=i.nodes.length,t=0;t++<h.p.nodesSpeed&&h.currentNodeIndex<e;)h.isOnScreen(i.nodes[h.currentNodeIndex])?h.drawNode(i.nodes[h.currentNodeIndex++]):h.currentNodeIndex++;return h.currentNodeIndex<e},this.task_drawBG=function(){for(var e=i.nodesBG.length,t=0;t++<h.p.nodesBGSpeed&&h.currentBGIndex<e;)h.drawBG(i.nodesBG[h.currentBGIndex++]);return h.currentBGIndex<e},this.drawBG=function(e){var t=(l=Math).round(10*e.displaySize)/10,o=e.displayX,r=e.displayY;n.fillStyle="#fff",n.beginPath(),n.arc(o,r,t,0,2*l.PI,!0),n.closePath(),n.fill();var a,i,s,d="fixed"==h.p.labelSize?h.p.defaultLabelSize:h.p.labelSizeRatio*e.displaySize,l=l.round;a=n.measureText(e.label).width,s=t*e.attr.deltaX/100;var u=t*e.attr.deltaY/100;switch(e.attr.position){default:a=t=l(o-s-t-a-13),i=(s=l(r+u))-3,o=l(o),r=l(r+u);break;case"right":a=(t=l(o+s+e.displaySize+8+a))-a,i=(s=l(r+u))-3,o=l(o),r=l(r+u)}return n.font=d+"px sans-serif",n.fillStyle="#fff",n.fillText(e.label,a,i),n.strokeStyle="#fff",n.lineWidth=.7,n.save(),n.moveTo(t,s),n.lineTo(o,r),n.stroke(),n.restore(),h},this.drawNode=function(t){var o=Math.round(10*t.displaySize)/10;e.fillStyle=t.attr.color?t.attr.color:"#ff0000",e.strokeStyle=t.attr.strokeStyle?t.attr.strokeStyle:"#000",t.attr.lineWidth&&(e.lineWidth=t.attr.lineWidth);var r=2*Math.PI;1>o&&(o=1);var n=t.displayX,a=t.displayY;return e.beginPath(),e.arc(n,a,1.4*o,0,r,!0),e.closePath(),t.attr.lineWidth&&e.stroke(),e.fill(),t.hover&&l(t),h},this.getCtx=function(e){return!!h.contexts[e]&&h.contexts[e]},this.drawActiveNode=function(e){var t=r;if(!u(e))return h;var o="fixed"==h.p.labelSize?h.p.defaultLabelSize:h.p.labelSizeRatio*e.displaySize;return t.font=(h.p.activeFontStyle||h.p.fontStyle||"")+" "+o+"px "+(h.p.activeFont||h.p.font||""),t.fillStyle="node"==h.p.labelHoverBGColor?e.color||h.p.defaultNodeColor:h.p.defaultActiveLabelBGColor,t.beginPath(),h.p.labelActiveShadow&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=4,t.shadowColor=h.p.labelActiveShadowColor),c.tools.drawRoundRect(t,Math.round(e.displayX-o/2-2),Math.round(e.displayY-o/2-2),Math.round(t.measureText(e.label).width+1.5*e.displaySize+o/2+4),Math.round(o+4),Math.round(o/2+2),"left"),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.beginPath(),t.fillStyle="node"==h.p.nodeBorderColor?e.color||h.p.defaultNodeColor:h.p.defaultNodeBorderColor,t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize+h.p.borderSize,0,2*Math.PI,!0),t.closePath(),t.fill(),t.beginPath(),t.fillStyle="node"==h.p.nodeActiveColor?e.color||h.p.defaultNodeColor:h.p.defaultNodeActiveColor,t.arc(Math.round(e.displayX),Math.round(e.displayY),e.displaySize,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="node"==h.p.labelActiveColor?e.color||h.p.defaultNodeColor:h.p.defaultLabelActiveColor,t.fillText(e.label,Math.round(e.displayX+1.5*e.displaySize),Math.round(e.displayY+o/2-3)),h},this.drawHoverNode=l,this.isOnScreen=u,this.resize=function(e,t){return p=e,f=t,h}}function i(e,i){function s(){return c.chronos.removeTask("node_"+h.id,2).removeTask("edge_"+h.id,2).removeTask("label_"+h.id,2).stopTasks(),h}function d(e,t){var o=document.createElement(t);return o.style.position="absolute",o.setAttribute("id","sigma_"+e+"_"+h.id),o.setAttribute("class","sigma_"+e+"_"+t),o.setAttribute("width",h.width),o.setAttribute("height",h.height),h.domRoot.appendChild(o),"undefined"!=typeof G_vmlCanvasManager&&"canvas"==t&&(o=G_vmlCanvasManager.initElement(o)),h.domElements[e]=o,o.getContext&&(h.contexts[e]=o.getContext("2d")),h}function l(){return h.p.drawHoverNodes&&(h.graph.checkHover(h.mousecaptor.mouseX,h.mousecaptor.mouseY),h.domElements.mouse.style.cursor="default",h.graph.nodes.forEach((function(e){e.hover&&!e.active&&(h.domElements.mouse.style.cursor="pointer",h.plotter.drawHoverNode(e))}))),h}function u(){return h.p.drawActiveNodes&&h.graph.nodes.forEach((function(e){e.active&&h.plotter.drawActiveNode(e)})),h}c.classes.Cascade.call(this),c.classes.EventDispatcher.call(this);var h=this;this.id=i.toString(),this.p={auto:!0,drawNodes:2,drawEdges:1,drawLabels:2,drawBG:2,lastNodes:2,lastEdges:0,lastLabels:2,lastBG:2,drawHoverNodes:!0,drawActiveNodes:!0},this.domRoot=e,this.width=this.domRoot.offsetWidth,this.height=this.domRoot.offsetHeight,this.graph=new o,this.domElements={},this.contexts={},d("bg","canvas"),d("bg2","canvas"),d("edges","canvas"),d("nodes","canvas"),d("labels","canvas"),d("hover","canvas"),d("monitor","div"),d("mouse","canvas"),this.plotter=new a(this.contexts.nodes,this.contexts.edges,this.contexts.labels,this.contexts.hover,this.contexts.bg,this.contexts.bg2,this.graph,this.width,this.height),this.monitor=new r(this,this.domElements.monitor),this.mousecaptor=new n(this.domElements.mouse,this.id),this.mousecaptor.bind("drag interpolate",(function(){h.draw(h.p.auto?2:h.p.drawNodes,h.p.auto?0:h.p.drawEdges,h.p.auto?2:h.p.drawLabels,h.p.auto?2:h.p.drawBG,!0)})).bind("stopdrag stopinterpolate",(function(){h.draw(h.p.auto?2:h.p.drawNodes,h.p.auto?1:h.p.drawEdges,h.p.auto?2:h.p.drawLabels,h.p.auto?2:h.p.drawBG,!0)})).bind("mousedown mouseup",(function(e){var t=h.graph.nodes.filter((function(e){return!!e.hover})).map((function(e){return e.id}));h.dispatch("mousedown"==e.type?"downgraph":"upgraph"),t.length&&h.dispatch("mousedown"==e.type?"downnodes":"upnodes",t)})).bind("move",(function(){h.contexts.hover.clearRect(0,0,h.domElements.hover.width,h.domElements.hover.height),l(),u()})),c.chronos.bind("startgenerators",(function(){c.chronos.getGeneratorsIDs().some((function(e){return!!e.match(RegExp("_ext_"+h.id+"$",""))}))&&h.draw(h.p.auto?2:h.p.drawNodes,h.p.auto?0:h.p.drawEdges,h.p.auto?2:h.p.drawLabels)})).bind("stopgenerators",(function(){h.draw()}));for(var p=0;p<t.length;p++)t[p](this);this.draw=function(e,t,o,r,n){if(n&&c.chronos.getGeneratorsIDs().some((function(e){return!!e.match(RegExp("_ext_"+h.id+"$",""))})))return h;for(var a in n={nodes:e=null==e?h.p.drawNodes:e,edges:t=null==t?h.p.drawEdges:t,labels:o=null==o?h.p.drawLabels:o,bg:r=null==r?h.p.drawBG:r},h.p.lastNodes=e,h.p.lastEdges=t,h.p.lastLabels=o,h.p.lastBG=r,s(),h.graph.rescale(h.width,h.height,0<e,0<t,0<r).setBorders(),h.mousecaptor.checkBorders(h.graph.borders,h.width,h.height),h.graph.translate(h.mousecaptor.stageX,h.mousecaptor.stageY,h.mousecaptor.ratio,0<e,0<t,0<r),h.dispatch("graphscaled"),h.domElements)"canvas"==h.domElements[a].nodeName.toLowerCase()&&(null==n[a]||0<=n[a])&&h.contexts[a].clearRect(0,0,h.domElements[a].width,h.domElements[a].height);if(h.plotter.currentEdgeIndex=0,h.plotter.currentNodeIndex=0,h.plotter.currentLabelIndex=0,h.plotter.currentBGIndex=0,a=null,n=!1,r)if(1<r)for(;h.plotter.task_drawBG(););else c.chronos.addTask(h.plotter.task_drawBG,"bg_"+h.id,!1),n=!0,a="bg_"+h.id;if(e)if(1<e)for(;h.plotter.task_drawNode(););else c.chronos.addTask(h.plotter.task_drawNode,"node_"+h.id,!1),n=!0,a="node_"+h.id;if(o)if(1<o)for(;h.plotter.task_drawLabel(););else a?c.chronos.queueTask(h.plotter.task_drawLabel,"label_"+h.id,a):c.chronos.addTask(h.plotter.task_drawLabel,"label_"+h.id,!1),n=!0,a="label_"+h.id;if(t)if(1<t)for(;h.plotter.task_drawEdge(););else a?c.chronos.queueTask(h.plotter.task_drawEdge,"edge_"+h.id,a):c.chronos.addTask(h.plotter.task_drawEdge,"edge_"+h.id,!1),n=!0,a="edge_"+h.id;return h.dispatch("draw"),h.refresh(),n&&c.chronos.runTasks(),h},this.resize=function(e,t){var o=h.width,r=h.height;if(null!=e&&null!=t?(h.width=e,h.height=t):(h.width=h.domRoot.offsetWidth,h.height=h.domRoot.offsetHeight),o!=h.width||r!=h.height){for(var n in h.domElements)h.domElements[n].setAttribute("width",h.width+"px"),h.domElements[n].setAttribute("height",h.height+"px");h.plotter.resize(h.width,h.height),h.draw(h.p.lastNodes,h.p.lastEdges,h.p.lastLabels,h.p.drawBG,!0)}return h},this.refresh=function(){return h.contexts.hover.clearRect(0,0,h.domElements.hover.width,h.domElements.hover.height),l(),u(),h},this.drawHover=l,this.drawActive=u,this.clearSchedule=s,window.addEventListener?window.addEventListener("resize",(function(){h.resize()}),!1):window.attachEvent("onresize",(function(){h.resize()}))}function s(e){var t=this;c.classes.EventDispatcher.call(this),this._core=e,this.kill=function(){},this.getID=function(){return e.id},this.configProperties=function(o,r){var n=e.config(o,r);return n==e?t:n},this.drawingProperties=function(o,r){var n=e.plotter.config(o,r);return n==e.plotter?t:n},this.mouseProperties=function(o,r){var n=e.mousecaptor.config(o,r);return n==e.mousecaptor?t:n},this.graphProperties=function(o,r){var n=e.graph.config(o,r);return n==e.graph?t:n},this.getMouse=function(){return{mouseX:e.mousecaptor.mouseX,mouseY:e.mousecaptor.mouseY,down:e.mousecaptor.isMouseDown}},this.position=function(o,r,n){return 0==arguments.length?{stageX:e.mousecaptor.stageX,stageY:e.mousecaptor.stageY,ratio:e.mousecaptor.ratio}:(e.mousecaptor.stageX=null!=o?o:e.mousecaptor.stageX,e.mousecaptor.stageY=null!=r?r:e.mousecaptor.stageY,e.mousecaptor.ratio=null!=n?n:e.mousecaptor.ratio,t)},this.goTo=function(o,r,n){return e.mousecaptor.interpolate(o,r,n),t},this.zoomTo=function(o,r,n){return(n=Math.min(Math.max(e.mousecaptor.config("minRatio"),n),e.mousecaptor.config("maxRatio")))==e.mousecaptor.ratio?e.mousecaptor.interpolate(o-e.width/2+e.mousecaptor.stageX,r-e.height/2+e.mousecaptor.stageY):e.mousecaptor.interpolate((n*o-e.mousecaptor.ratio*e.width/2)/(n-e.mousecaptor.ratio),(n*r-e.mousecaptor.ratio*e.height/2)/(n-e.mousecaptor.ratio),n),t},this.resize=function(o,r){return e.resize(o,r),t},this.draw=function(o,r,n,a,i){return e.draw(o,r,n,a,i),t},this.refresh=function(){return e.refresh(),t},this.addGenerator=function(o,r,n){return c.chronos.addGenerator(o+"_ext_"+e.id,r,n),t},this.removeGenerator=function(o){return c.chronos.removeGenerator(o+"_ext_"+e.id),t},this.addNode=function(o,r){return e.graph.addNode(o,r),t},this.addNodeBG=function(o,r){return e.graph.addNodeBG(o,r),t},this.addEdge=function(o,r,n,a){return e.graph.addEdge(o,r,n,a),t},this.dropNode=function(o){return e.graph.dropNode(o),t},this.dropEdge=function(o){return e.graph.dropEdge(o),t},this.pushGraph=function(o,r){return o.nodes&&o.nodes.forEach((function(o){o.id&&(!r||!e.graph.nodesIndex[o.id])&&t.addNode(o.id,o)})),o.edges&&o.edges.forEach((function(o){(validID=o.source&&o.target&&o.id)&&(!r||!e.graph.edgesIndex[o.id])&&t.addNode(o.id,o.source,o.target,o)})),t},this.emptyGraph=function(){return e.graph.empty(),t},this.getNodesCount=function(){return e.graph.nodes.length},this.getEdgesCount=function(){return e.graph.edges.length},this.iterNodes=function(o,r){return e.graph.iterNodes(o,r),t},this.iterEdges=function(o,r){return e.graph.iterEdges(o,r),t},this.getNodes=function(t){return e.graph.getNodes(t)},this.getEdges=function(t){return e.graph.getEdges(t)},this.activateMonitoring=function(){return e.monitor.activate()},this.desactivateMonitoring=function(){return e.monitor.desactivate()},e.bind("downnodes upnodes downgraph upgraph",(function(e){t.dispatch(e.type,e.content)})),e.graph.bind("overnodes outnodes",(function(e){t.dispatch(e.type,e.content)}))}var d=0;t=void 0,t=[],c.init=function(e){return e=new i(e,(++d).toString()),c.instances[d]=new s(e),c.instances[d]},c.addPlugin=function(e,o,r){s.prototype[e]=o,t.push(r)},c.chronos=new function(){function e(e){return window.setTimeout(e,0),l}function t(){for(l.dispatch("frameinserted");u&&x.length&&o(););u&&x.length?(y=(new Date).getTime(),f++,m=g-(v-g),l.dispatch("insertframe"),e(t)):n()}function o(){if(E%=x.length,!x[E].task()){var e=x[E].taskName;S=S.filter((function(t){return t.taskParent==e&&x.push({taskName:t.taskName,task:t.task}),t.taskParent!=e})),l.dispatch("killed",x.splice(E--,1)[0])}return E++,(v=(new Date).getTime()-y)<=m}function r(){return u=!0,f=E=0,b=y=(new Date).getTime(),l.dispatch("start"),l.dispatch("insertframe"),e(t),l}function n(){return l.dispatch("stop"),u=!1,l}function a(e,t,o){if("function"!=typeof e)throw Error('Task "'+t+'" is not a function');return x.push({taskName:t,task:e}),u=!(!u&&(o&&r(),0)),l}function i(e){return e?Object.keys(w).filter((function(e){return!!w[e].on})).length:Object.keys(w).length}function s(){return Object.keys(w).length?(l.dispatch("startgenerators"),l.unbind("killed",d),e((function(){for(var e in w)w[e].on=!0,a(w[e].task,e,!1)})),l.bind("killed",d).runTasks()):l.dispatch("stopgenerators"),l}function d(e){null!=w[e.content.taskName]&&(w[e.content.taskName].del||!w[e.content.taskName].condition()?delete w[e.content.taskName]:w[e.content.taskName].on=!1,0==i(!0)&&s())}c.classes.EventDispatcher.call(this);var l=this,u=!1,h=80,p=0,f=0,g=1e3/h,m=g,v=0,b=0,y=0,w={},x=[],S=[],E=0;return this.frequency=function(e){return null!=e?(h=Math.abs(1*e),g=1e3/h,f=0,l):h},this.runTasks=r,this.stopTasks=n,this.insertFrame=e,this.addTask=a,this.queueTask=function(e,t,o){if("function"!=typeof e)throw Error('Task "'+t+'" is not a function');if(!x.concat(S).some((function(e){return e.taskName==o})))throw Error('Parent task "'+o+'" of "'+t+'" is not attached.');return S.push({taskParent:o,taskName:t,task:e}),l},this.removeTask=function(e,t){if(null==e)x=[],1==t?S=[]:2==t&&(x=S,S=[]),n();else{var o="string"==typeof e?e:"";x=x.filter((function(t){return("string"==typeof e?t.taskName!=e:t.task!=e)||(o=t.taskName,!1)})),0<t&&(S=S.filter((function(e){return 1==t&&e.taskParent==o&&x.push(e),e.taskParent!=o})))}return u=!(x.length&&(n(),1)),l},this.addGenerator=function(e,t,o){return null!=w[e]||(w[e]={task:t,condition:o},0==i(!0)&&s()),l},this.removeGenerator=function(e){return w[e]&&(w[e].on=!1,w[e].del=!0),l},this.startGenerators=s,this.getGeneratorsIDs=function(){return Object.keys(w)},this.getFPS=function(){return u&&(p=Math.round(f/((new Date).getTime()-b)*1e4)/10),p},this.getTasksCount=function(){return x.length},this.getQueuedTasksCount=function(){return S.length},this.getExecutionTime=function(){return y-b},this},c.debugMode=0,c.log=function(){if(1==c.debugMode)for(var e in arguments)console.log(arguments[e]);else if(1<c.debugMode)for(e in arguments)throw Error(arguments[e]);return c},c.easing={linear:{},quadratic:{}},c.easing.linear.easenone=function(e){return e},c.easing.quadratic.easein=function(e){return e*e},c.easing.quadratic.easeout=function(e){return-e*(e-2)},c.easing.quadratic.easeinout=function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)},c.tools.drawRoundRect=function(t,o,r,n,a){t.fillStyle="#009BE1",t.fillRect(o+e,r+e,n,a)},c.tools.getRGB=function(e,t){var o={r:0,g:0,b:0};if(3<=(e=e.toString()).length&&"#"==e.charAt(0)){var r=e.length-1;6==r?o={r:parseInt(e.charAt(1)+e.charAt(2),16),g:parseInt(e.charAt(3)+e.charAt(4),16),b:parseInt(e.charAt(5)+e.charAt(5),16)}:3==r&&(o={r:parseInt(e.charAt(1)+e.charAt(1),16),g:parseInt(e.charAt(2)+e.charAt(2),16),b:parseInt(e.charAt(3)+e.charAt(3),16)})}return t&&(o=[o.r,o.g,o.b]),o},c.tools.rgbToHex=function(e,t,o){return c.tools.toHex(e)+c.tools.toHex(t)+c.tools.toHex(o)},c.tools.toHex=function(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)),"0123456789ABCDEF".charAt((e-e%16)/16)+"0123456789ABCDEF".charAt(e%16))},c.publicPrototype=s.prototype,c.publicPrototype.parseJson=function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!1),o.send(null);var n=JSON.parse(o.responseText);for(r=0;r<n.nodes.length;r++){var a=n.nodes[r].id;this.addNode(a,n.nodes[r])}for(var i=0;i<n.edges.length;i++){var s=n.edges[i],d=s.source,l=s.target,u=(s.label,s.id);this.addEdge(u,d,l,s)}t&&t.call(this)}}();let h=document.querySelector(".returntext"),p=document.querySelector("#attributepane"),f=document.querySelector("#attributepane .name"),g=document.querySelector("#attributepane .link ul"),m=document.querySelector("#attributepane .data"),v=c.init(document.querySelector("#sigma-canvas")).drawingProperties(u.drawingProperties).graphProperties(u.graphProperties).mouseProperties(u.mouseProperties);window.sigma_instance=v,v.parseJson(document.querySelector("body").dataset.graph,()=>{v.bind("upnodes",e=>{p.classList.add("open"),S(e.content[0])}),v.iterEdges(e=>{e.attr.color=e.color}),v.iterNodes(e=>{e.attr.color=e.color}),v.draw(),0<window.location.hash.substr(1).length&&(null.exactMatch=!0,null.search(a),null.clean())});let b=document.querySelector("#zoom .in"),y=document.querySelector("#zoom .out"),w=e=>{v.zoomTo(window.innerWidth/2,window.innerHeight/2,v._core.mousecaptor.ratio*e)};b.addEventListener("click",e=>{e.preventDefault(),w(1.5)}),y.addEventListener("click",e=>{e.preventDefault(),w(.5)}),h.addEventListener("click",e=>{e.preventDefault(),p.classList.remove("open"),x()});let x=()=>{v.iterEdges(e=>{e.hidden=!1}),v.iterNodes(e=>{e.attr.lineWidth=!1,e.hidden=!1}),v.draw(),window.location.hash=""},S=e=>{let t=v._core.graph.nodesIndex[e];v.detail=!0;let o=[],r=[];v.iterEdges(e=>{e.source==t.id?o.push(e.target):e.target==t.id&&r.push(e.source),e.attr.lineWidth=!1,e.hidden=!1,e.attr.color="rgba(0, 0, 0, 1)"});let n=o.filter(e=>-1!==r.indexOf(e));v.iterNodes(e=>{e.hidden=!0});var a=e=>{let o=e.map(e=>{let o=v._core.graph.nodesIndex[e];if(o.hidden=!1,o.attr.lineWidth=!1,e!=t.id)return o});return o.sort((e,t)=>e.label.toLowerCase()>t.label.toLowerCase()?1:-1),o.map(e=>'<li class="membership"><a href="#'+e.label+'" onmouseover="sigma_instance._core.plotter.drawHoverNode(sigma_instance._core.graph.nodesIndex[\''+e.id+"'])\" onclick=\"nodeActive('"+e.id+'\')" onmouseout="sigma_instance.refresh()">'+e.label+"</a></li>")};let i=[];i.push("<h2>Mututal ("+n.length+")</h2>"),n.length>0?i=i.concat(a(n)):i.push("No mutual links<br>"),i.push("<h2>Incoming ("+r.length+")</h2>"),r.length>0?i=i.concat(a(r)):i.push("No incoming links<br>"),i.push("<h2>Outgoing ("+o.length+")</h2>"),o.length>0?i=i.concat(a(o)):i.push("No outgoing links<br>"),t.hidden=!1,t.attr.lineWidth=6,t.attr.strokeStyle="#000000",v.draw(),g.innerHTML=i.join("");let s=t.attr;if(s.attributes){var d=l.imageAttribute;let e=[];for(var u in s.attributes){var c=s.attributes[u],h="";u!=d&&(h="<span><strong>"+u+":</strong> "+c+"</span><br/>"),e.push(h)}f.innerHTML=d?'<a href="https://twitter.com/'+t.label+'" target="_blank" ><img src='+s.attributes[d]+' style="vertical-align:middle" /> <span onmouseover="sigma_instance._core.plotter.drawHoverNode(sigma_instance._core.graph.nodesIndex[\''+t.id+'\'])" onmouseout="sigma_instance.refresh()">'+t.label+"</span></a>":"<div><span onmouseover=\"sigma_instance._core.plotter.drawHoverNode(sigma_instance._core.graph.nodesIndex['"+t.id+'\'])" onmouseout="sigma_instance.refresh()">'+t.label+"</span></div>",m.innerHTML=e.join("")}window.location.hash=t.label}}]);